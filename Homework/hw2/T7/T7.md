# The Security Architecture of the Chromium Browser

## Summerize
- 主要贡献：提出了模块化的浏览器架构，设计并实现了Chromium。
- 核心思想：将浏览器分为两个保护域，分别为浏览器内核和渲染引擎，通过sandbox使渲染引擎无法直接访问用户的文件系统，这样即使更容易被攻击的渲染引擎被攻击者控制也不会对用户造成很大的危害，增加安全性。


#### 单片浏览器的缺点：
- 一个应用的崩溃会影响其他的应用。
- 单片浏览器在单一的保护域中运行，攻击者可以利用未修补的漏洞危及整个网络。

#### 其他模块化浏览器的缺点
- 牺牲与一些网站的兼容性来提供架构隔离，用户体验不好。
#### 设计选择
- 浏览器结构必须与现在的网络兼容。
- 浏览器架构将渲染引擎视为黑盒。

#### 攻击模型
认为攻击者已经得知用户浏览器中未修补的漏洞，且能够使用户浏览器呈现恶意内容。
需要达到的主要目标：
- 阻止攻击者向用户设备植入恶意软件
- 使攻击者不能够监测用户的键盘输入
- 阻止攻击者读取用户硬盘中的文件

#### Chromium架构
具有模块化结构，浏览器核心模块在用户端，渲染引擎模块在网络端，中间有sandbox阻隔，减少渲染引擎能够控制的部分。因此即使攻击者可以控制整个渲染引擎，sandbox也能阻止攻击者对用户的文件系统进行破坏。

- 渲染引擎：为DOM调用提供服务，解释和执行web内容，执行同源策略。运行在sandbox中，使其不能直接访问设备操作系统。渲染引擎通过浏览器内核来检索网络中的url。
- 浏览器内核：联系渲染引擎和操作系统，存储用户密码数据库等隐私内容，实现内核API。
- sandbox：阻止渲染引擎的某些对操作系统的请求来阻止攻击者对用户设备的攻击。具体实现为使渲染引擎使用受限制的安全令牌运行。当渲染引擎想要访问一个“secure object”，windows安全管理器检查其是否有这个权限。
- 其他功能：
  - 插件：插件运行在sandbox之外并且拥有用户的所有权限，这种设计可以让插件兼容性更好，但是攻击者可以利用插件中的漏洞进行攻击，在用户的设备中植入恶意软件。
  - 下载和上传文件时渲染引擎可以访问文件系统。


## Critical Reviews

## Pros
- 提出了开创性的浏览器架构，兼顾安全性和用户体验。
- 通过将渲染引擎视为blackbox减少浏览器内核的复杂度。

## Cons
- sandbox对于一些使用FAT32文件系统的USB设备失效，使攻击者可能直接读取其存储的内容。
- 因为插件能够拥有所有的权限，攻击者可能通过用户使用的插件中的漏洞进行攻击，进而读取或者修改用户的文件系统。
- 对于不同的渲染任务使用不同的渲染引擎实例，使内存占用比较大。





